# Домашнее задание к занятию «Репликация и масштабирование. Часть 2» Яковлев Д.А


### Задание 1

Опишите основные преимущества использования масштабирования методами:

- активный master-сервер и пассивный репликационный slave-сервер; 
- master-сервер и несколько slave-серверов;


Решение:

 Активный master-сервер и пассивный репликационный slave-сервер
Преимущества:

   ! Повышение отказоустойчивости:

   Если master-сервер выйдет из строя, slave-сервер может быть переведен в режим master (вручную или автоматически), что минимизирует простои системы.

   Данные на slave-сервере остаются актуальными, так как он постоянно синхронизируется с master-сервером.

  !  Резервное копирование без нагрузки на master:

   Резервные копии можно создавать на slave-сервере, не нагружая master-сервер. Это особенно полезно для больших баз данных.

 ! Чтение данных без нагрузки на master:

   Запросы на чтение (SELECT) можно перенаправлять на slave-сервер, что снижает нагрузку на master-сервер и улучшает производительность системы.

 ! Тестирование и разработка:

 Slave-сервер можно использовать для тестирования новых функций, обновлений или запросов, не затрагивая основную базу данных на master-сервере.


 Master-сервер и несколько slave-серверов
Преимущества:

! Масштабирование чтения:

   Несколько slave-серверов позволяют распределять нагрузку от запросов на чтение между несколькими узлами. Это особенно полезно для систем с высокой нагрузкой на чтение (например, веб-приложения с большим количеством пользователей).

! Повышенная отказоустойчивость:

   При выходе из строя одного slave-сервера, другие продолжают работать, обеспечивая доступность данных.

   В случае сбоя master-сервера, один из slave-серверов может быть быстро переведен в режим master.


! Параллельная обработка запросов:

   Запросы на чтение могут выполняться параллельно на нескольких slave-серверах, что ускоряет обработку данных.

!  Гибкость в использовании:

   Разные slave-серверы можно использовать для разных целей: один для аналитики, другой для резервного копирования, третий для обслуживания запросов пользователей.

!  Балансировка нагрузки:

   Нагрузка на чтение может быть распределена между несколькими slave-серверами с использованием балансировщиков нагрузки (например, HAProxy или Nginx).




---

### Задание 2


Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц: 

- пользователи, 
- книги, 
- магазины (столбцы произвольно). 

Опишите принципы построения системы и их разграничение или разбивку между базами данных.

*Пришлите блоксхему, где и что будет располагаться. Опишите, в каких режимах будут работать сервера.* 

Решение:
Вертикальный шаринг:

Для вертикального шаринга я каждую таблицу поместил на разные сервера.

![alt text](https://github.com/NorthernWarrior88/sys-pattern-homework/blob/main/1234.png) 


Горизаонтальный шардинг:

Я предполагаю, что самая большая таблица будет являтся -  книги т.к. она связанна как и с  пользователями  и с магазинами.Горизонтальный шардинг буду проводить с таблицей книги, за shard key возму books_id. Разбиваю таблицу на две партиции от books_id A-N до books_id O-Z. Для данного вида шардирования подойдет:

   master-сервер и несколько slave-серверов;
   активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD);

![alt text](https://github.com/NorthernWarrior88/sys-pattern-homework/blob/main/132134.png)




